<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
    <title>Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.19.0/phaser.js"></script>

    <style type="text/css">
        body {  
            margin: 0;
            }
    </style>
</head>
<body>

<script type="text/javascript">

let startingVelocity = 250;
let ball1, ball2, mouseDown, mouseDownX, mouseDownY, sprite, bmd, graphics;

function preload() {
  this.load.image("ball", "assets/cannonBall.png");
  this.load.image("bomb", "assets/hbomb.png");
}

function create() {
    myLine = this.add.graphics();
    myLine.lineStyle(2, 0x00ff00, 1);

    ball1 = this.physics.add.image(
        200 + Math.random() * 100,
        Math.random() * 400,
        "ball"
    );
    ball1.setSize(20);
    ball1.setCircle(20, 0, 0);
    ball2 = this.physics.add.image(
        100 + Math.random() * 100,
        Math.random() * 400,
        "bomb"
    );
    ball2.setCircle(16, 0, 0);

    ball1.setDamping(true).setDrag(0.98);
    ball2.setDamping(true).setDrag(0.98);

    ball1.setCollideWorldBounds(true);
    ball2.setCollideWorldBounds(true);

    ball1.body.onWorldBounds = true;
    ball2.body.onWorldBounds = true;

    ball1.setBounce(1);
    ball2.setBounce(1);

    this.input.on("pointerup", function(pointer) {
        // ball1.setVelocity(Math.random() * 1500, Math.random() * 1500);
        ball1.setVelocity((ball1.x-pointer.x)*10, (ball1.y-pointer.y)*10);
        mouseDown = false;
        myLine.clear();
    });

    this.input.on('pointerdown', function(pointer){
            mouseDown = true;
            mouseDownX = pointer.x;
            mouseDownY = pointer.y;
            console.log(mouseDownX, mouseDownY);
    }, this);

    this.input.on('pointermove', function(pointer, localX, localY, event){ 
        if(mouseDown === true){
            myLine.clear();
            myLine.lineBetween(ball1.x, ball1.y, ball1.x+(ball1.x-pointer.x), ball1.y+(ball1.y-pointer.y));
            console.log(pointer.x, pointer.y);
        } 
    }, this);

  this.physics.add.collider(ball1, ball2, ballCollision);
  this.physics.world.on("worldbounds", worldCollision);
}

function ballCollision() {

}

function worldCollision() {}

function update() {
  this.graphics.strokeLineShape(line);
}

var config = {
  type: Phaser.AUTO,
  width: 400,
  height: 200,
  physics: {
    default: "arcade",
    arcade: {
      debug: true,
      gravity: { y: 0, x: 0 }
    }
  },
  scene: {
    preload: preload,
    create: create
  }
};

var game = new Phaser.Game(config);

</script>

</body>
</html>
